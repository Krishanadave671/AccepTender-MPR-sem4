<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../Styles/table.css" />
    <script src="../Scripts/table.js"></script>
    <title>table</title>

    <link rel="stylesheet" href="../Styles/nav.css" />
  </head>
  <body>
   {{>navbar}}
    <section class="sect3">
      <p>Filters:</p>
      <ul class="filters">
        <li class="filter-items"><a href="#" onclick="sortByExp()">by experience</a></li>
        <li class="filter-items"><a href="#" onclick="sortByCost()">by cost</a></li>
        <li class="filter-items"><a href="#">by organization</a></li>
      </ul>
    </section>
    <table
      id="dtOrderExample"
      class="table table-striped table-bordered table-sm"
      cellspacing="0"
      width="100%"
    >
      <thead>
        <tr style="cursor: pointer">
          <th onclick="sortTable(0);" class="th-sm">Company name</th>
          <th onclick="sortTable(1);" class="th-sm">Registration no</th>
          <th onclick="sortTable(3);" class="th-sm">Establishment year</th>
          <th onclick="sortTable(4);" class="th-sm">bid amount</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        {{# each Biddilist}}
        <tr id="table">
          <td class="col1"><a href="/BidderProfile">{{this.companyname}}</a></td>
          <td class="col2">{{this.registrationnumber}}</td>
          <td class="col3">{{this.eYear}}</td>
          <td class="col4">{{this.bidAmount}}</td>
        </tr>
          {{/each}}
        
    </table>
  </body>
  <script>
    "use strict";
    function sortByCost(){
        const tableBody = document.getElementById("tableBody");
        const rows = tableBody.rows;
        
        const sortedRows = [...rows].sort((a,b) =>{
          return parseInt(a.children[3].innerHTML) < parseInt(b.children[3].innerHTML) ? -1 : 1;
        });
        tableBody.innerHTML =[...sortedRows].map(row => row.outerHTML).join("");
    }
    function sortByExp(){
        const tableBody = document.getElementById("tableBody");
        const rows = tableBody.rows;
        
        const sortedRows = [...rows].sort((a,b) =>{
          return parseInt(a.children[2].innerHTML) < parseInt(b.children[2].innerHTML) ? -1 : 1;
        });
        tableBody.innerHTML =[...sortedRows].map(row => row.outerHTML).join("");
    }
  </script>
</html>
